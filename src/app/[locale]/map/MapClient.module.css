/* MapClient.module.css */

/* ---------------------------------------------------------
   PAGE + MAP SHELL
   --------------------------------------------------------- */

.page {
height: 100svh;
  background: var(--bg);
  color: var(--ink);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Map-området fylder resten under top UI (topbar + insights ligger over map via DOM)
   Flex:1 + min-height:0 er den robuste combo til iOS/Safari */
.mapShell {
  position: relative;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* Leaflet container skal altid fylde parent (ellers får du “kortet stopper tidligt”) */
.mapShell :global(.leaflet-container) {
  height: 100% !important;
  width: 100% !important;
}

/* ---------------------------------------------------------
   LAYERS / DOCKING
   --------------------------------------------------------- */

/* Peek card (når du vælger et spot) – ligger over sheet */
.peekWrap {
  position: absolute;
  left: 12px;
  right: 12px;

  /* Ligger over bottomDock (sheet) */
  bottom: calc(
    var(--bottom-nav-h, 92px)
    + 24px
    + env(safe-area-inset-bottom)
    + 82px /* ca. sheet header højde */
  );

  z-index: 920;
  pointer-events: none;
}

.peekWrap > * {
  pointer-events: auto;
}

/* Sheet wrapper kan ligge i bottomDock (samme “dock zone” som peek card) */
.sheetWrap {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 910;
}

/* ---------------------------------------------------------
   BOTTOM DOCK (DEN VIGTIGE)
   Én dock-zone som alt “bottom UI” respekterer.
   --------------------------------------------------------- */

.bottomDock {
  position: absolute;
  left: 12px;
  right: 12px;

  /* ✅ Den rigtige: mere luft over bottom nav + safe area
     24px er “comfort spacing” på iOS så det ikke ser klemt ud */
  bottom: calc(
    var(--bottom-nav-h, 92px)
    + 24px
    + env(safe-area-inset-bottom)
  );

  z-index: 900;

  /* wrapper må ikke blokere kortet */
  pointer-events: none;

  /* flere elementer (peek + sheet) kan stables pænt */
  display: grid;
  gap: 10px;

  /* optisk “lift” (subtilt) */
  transform: translateY(-6px);
}

.bottomDock > * {
  pointer-events: auto;
}

/* Bonus: små skærme – lidt tighter, men stadig korrekt spacing */
@media (max-width: 420px) {
  .bottomDock {
    left: 10px;
    right: 10px;
    bottom: calc(
      var(--bottom-nav-h, 92px)
      + 22px
      + env(safe-area-inset-bottom)
    );
    gap: 8px;
    transform: translateY(-5px);
  }

  .peekWrap {
    left: 10px;
    right: 10px;
  }
}