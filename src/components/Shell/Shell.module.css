.shell{
  min-height: 100vh;
  background: var(--bg);
  color: var(--ink);
  position: relative;
  overflow-x: hidden;
}

/* Theme-aware vibrant background layers */
.bg{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  /* “forest aurora” (theme-aware) */
  background:
    radial-gradient(900px 700px at 20% -10%,
      color-mix(in srgb, var(--accent) 26%, transparent),
      transparent 60%),
    radial-gradient(800px 700px at 85% 10%,
      rgba(56,189,248,0.14),
      transparent 55%),
    radial-gradient(900px 800px at 65% 85%,
      rgba(167,139,250,0.10),
      transparent 60%),
    /* replace hardcoded black overlay with bg-based shade */
    linear-gradient(180deg,
      transparent,
      color-mix(in srgb, var(--bg) 88%, rgba(0,0,0,0.10)));
}

.noise{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.06;
  mix-blend-mode: overlay;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  background-size: 180px 180px;
}

/* Content stack */
.stack{
  position: relative;
  z-index: 2;

  /* reserve space for BottomNav */
  padding-bottom: calc(var(--bottom-nav-h, 92px) + env(safe-area-inset-bottom));
}

/* Optional: consistent anchor offset under sticky header */
.stack > *{
  scroll-margin-top: 84px;
}

/* Light mode: noise looks harsher; tone it down */
:global(:root[data-theme="light"]) .noise{
  opacity: 0.04;
  mix-blend-mode: multiply;
}

.shell[data-hide-bottomnav="1"]{
  --bottom-nav-h: 0px;
}